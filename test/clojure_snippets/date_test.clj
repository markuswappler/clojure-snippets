(ns clojure-snippets.date-test
  (:use clojure.test
        clojure-snippets.date))

(deftest test-days
  (testing "one date"
           (is (= 0 (days [1 1 1])))
           (is (= 1 (days [2 1 1])))
           (is (= 2 (days [3 1 1])))
           (is (= 31 (days [1 2 1])))
           (is (= (+ 31 28) (days [1 3 1])))
           (is (= 365 (days [1 1 2])))
           (is (= (* 2 365) (days [1 1 3])))
           (is (= (* 3 365) (days [1 1 4])))
           (is (= (+ (* 3 365) 31 27) (days [28 2 4])))
           (is (= (+ (* 3 365) 31 28) (days [29 2 4])))
           (is (= (+ (* 3 365) 31 29) (days [1 3 4])))
           (is (= (+ (* 3 365) 366) (days [1 1 5])))
           (is (= (+ (* 3 365) 366 31 28) (days [1 3 5])))
           (is (= (+ (* 76 365) (* 24 366)) (days [1 1 101])))
           (is (= (+ (* 152 365) (* 48 366)) (days [1 1 201])))
           (is (= (+ (* 228 365) (* 72 366)) (days [1 1 301])))
           (is (= (+ (* 303 365) (* 97 366)) (days [1 1 401]))))
  (testing "two dates"
           (is (= 0 (days [24 1 1977] [24 1 1977])))
           (is (= 7 (days [24 1 1977] [31 1 1977])))
           (is (= -7 (days [31 1 1977] [24 1 1977])))
           (is (= 2 (days [28 2 1992] [1 3 1992])))
           (is (= 1 (days [28 2 1993] [1 3 1993])))
           (is (= 367 (days [28 2 1992] [1 3 1993])))
           (is (= 1 (days [31 12 1899] [1 1 1900])))
           (is (= -1 (days [1 1 1900] [31 12 1899])))
           (is (= 334 (days [10 2 2013] [10 1 2014])))
           (is (= 337 (days [10 3 2013] [10 2 2014])))
           (is (= 335 (days [10 5 2013] [10 4 2014])))))

(deftest test-weekday
  (is (= :monday (weekday [1 1 1900])))
  (is (= :sunday (weekday [31 12 1899])))
  (is (= :saturday (weekday [30 12 1899])))
  (is (= :tuesday (weekday [2 1 1900])))
  (is (= :wednesday (weekday [3 1 1900])))
  (is (= :thursday (weekday [4 1 1900])))
  (is (= :friday (weekday [5 1 1900])))
  (is (= :sunday (weekday [4 8 2013])))
  (is (= :monday (weekday [24 1 1977])))
  (is (= :friday (weekday [17 8 1979])))
  (is (= :thursday (weekday [26 6 1986]))))